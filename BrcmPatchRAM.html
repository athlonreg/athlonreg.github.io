<!DOCTYPE HTML><html lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="keywords" content="BrcmPatchRAM,博通,无线网卡"><meta name="description" content="专注优质应用分享与技术经验交流。"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="renderer" content="webkit|ie-stand|ie-comp"><meta name="mobile-web-app-capable" content="yes"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="baidu_union_verify" content="4e839f89679ffccd45aadacf60546450"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-165042084-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-165042084-1")</script><title>BrcmPatchRAM 无线网卡驱动 | 套陆的部落阁</title><link rel="icon" type="image/x-icon, image/vnd.microsoft.icon" href="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/favicon.ico"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/libs/awesome/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/libs/materialize/materialize.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/libs/aos/aos.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/libs/animate/animate.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/libs/lightGallery/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/css/matery.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/css/my.css"><script src="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/live2d/autoload.js"></script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?849cf4fa113bc36fac5697a548d0e27c";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script>document.write('<script src="https://jspassport.ssl.qhimg.com/11.0.1.js?d182b3f28525f2db83acfaaf6e696dba" id="sozz"><\/script>')</script><script src="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/libs/jquery/jquery.min.js"></script><script data-ad-client="ca-pub-7406269002228687" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="套陆的部落阁" type="application/atom+xml"><link rel="stylesheet" href="/css/prism-tomorrow.css"><link rel="stylesheet" href="/css/prism-line-numbers.css"></head><body><header class="navbar-fixed"><nav id="headNav" class="bg-color nav-transparent"><div id="navContainer" class="nav-wrapper container"><div class="brand-logo"><a href="/" class="waves-effect waves-light"><img src="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/favicon.ico" class="logo-img" alt="LOGO"> <span class="logo-span">套陆的部落阁</span></a></div><a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a><ul class="right nav-menu"><li class="hide-on-med-and-down nav-item"><a href="/" class="waves-effect waves-light"><i class="fas fa-home" style="zoom:.6"></i> <span>首页</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/tags" class="waves-effect waves-light"><i class="fas fa-tags" style="zoom:.6"></i> <span>标签</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/categories" class="waves-effect waves-light"><i class="fas fa-bookmark" style="zoom:.6"></i> <span>分类</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/archives" class="waves-effect waves-light"><i class="fas fa-archive" style="zoom:.6"></i> <span>归档</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/about" class="waves-effect waves-light"><i class="fas fa-user-circle" style="zoom:.6"></i> <span>关于</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/contact" class="waves-effect waves-light"><i class="fas fa-comments" style="zoom:.6"></i> <span>留言板</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/friends" class="waves-effect waves-light"><i class="fas fa-address-book" style="zoom:.6"></i> <span>友情链接</span></a></li><li><a href="#searchModal" class="modal-trigger waves-effect waves-light"><i id="searchIcon" class="fas fa-search" title="搜索" style="zoom:.85"></i></a></li></ul><div id="mobile-nav" class="side-nav sidenav"><div class="mobile-head bg-color"><img src="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/favicon.ico" class="logo-img circle responsive-img"><div class="logo-name">套陆的部落阁</div><div class="logo-desc">专注优质应用分享与技术经验交流。</div></div><ul class="menu-list mobile-menu-list"><li class="m-nav-item"><a href="/" class="waves-effect waves-light"><i class="fa-fw fas fa-home"></i> 首页</a></li><li class="m-nav-item"><a href="/tags" class="waves-effect waves-light"><i class="fa-fw fas fa-tags"></i> 标签</a></li><li class="m-nav-item"><a href="/categories" class="waves-effect waves-light"><i class="fa-fw fas fa-bookmark"></i> 分类</a></li><li class="m-nav-item"><a href="/archives" class="waves-effect waves-light"><i class="fa-fw fas fa-archive"></i> 归档</a></li><li class="m-nav-item"><a href="/about" class="waves-effect waves-light"><i class="fa-fw fas fa-user-circle"></i> 关于</a></li><li class="m-nav-item"><a href="/contact" class="waves-effect waves-light"><i class="fa-fw fas fa-comments"></i> 留言板</a></li><li class="m-nav-item"><a href="/friends" class="waves-effect waves-light"><i class="fa-fw fas fa-address-book"></i> 友情链接</a></li><li><div class="divider"></div></li><li><a href="https://github.com/athlonreg" rel="external nofollow noreferrer" class="waves-effect waves-light" target="_blank"><i class="fab fa-github-square fa-fw"></i> Fork Me</a></li></ul></div></div><style>.nav-transparent .github-corner{display:none!important}.github-corner{position:absolute;z-index:10;top:0;right:0;border:0;transform:scale(1.1)}.github-corner svg{color:#0f9d58;fill:#fff;height:64px;width:64px}.github-corner:hover .octo-arm{animation:a .56s ease-in-out}.github-corner .octo-arm{animation:none}@keyframes a{0%,to{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}</style><a href="https://github.com/athlonreg" class="github-corner tooltipped hide-on-med-and-down" target="_blank" data-tooltip="Fork Me" data-position="left" data-delay="50"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a></nav></header><script src="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/libs/cryptojs/crypto-js.min.js"></script><script>(function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();</script><div class="bg-cover pd-header post-cover" style="background-image:url(https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/medias/featureimages/10.jpg)"><div class="container" style="right:0;left:0"><div class="row"><div class="col s12 m12 l12"><div class="brand"><h1 class="description center-align post-title">BrcmPatchRAM 无线网卡驱动</h1></div></div></div></div></div><main class="post-container content"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/libs/tocbot/tocbot.css"><style>#articleContent h1::before,#articleContent h2::before,#articleContent h3::before,#articleContent h4::before,#articleContent h5::before,#articleContent h6::before{display:block;content:" ";height:100px;margin-top:-100px;visibility:hidden}#articleContent :focus{outline:0}.toc-fixed{position:fixed;top:64px}.toc-widget{width:345px;padding-left:20px}.toc-widget .toc-title{margin:35px 0 15px 0;padding-left:17px;font-size:1.5rem;font-weight:700;line-height:1.5rem}.toc-widget ol{padding:0;list-style:none}#toc-content{height:calc(100vh - 250px);overflow:auto}#toc-content ol{padding-left:10px}#toc-content ol li{padding-left:10px}#toc-content .toc-link:hover{color:#42b983;font-weight:700;text-decoration:underline}#toc-content .toc-link::before{background-color:transparent;max-height:25px;position:absolute;right:23.5vw;display:block}#toc-content .is-active-link{color:#42b983}#floating-toc-btn{position:fixed;right:25px;bottom:76px;padding-top:15px;margin-bottom:0;z-index:998}#floating-toc-btn .btn-floating{width:48px;height:48px}#floating-toc-btn .btn-floating i{line-height:48px;font-size:1.4rem}</style><div class="row"><div id="main-content" class="col s12 m12 l9"><div id="artDetail"><div class="card"><div class="card-content article-info"><div class="row tag-cate"><div class="col s7"><div class="article-tag"><a href="/tags/BrcmPatchRAM/"><span class="chip bg-color">BrcmPatchRAM</span></a> <a href="/tags/%E5%8D%9A%E9%80%9A/"><span class="chip bg-color">博通</span></a> <a href="/tags/%E6%97%A0%E7%BA%BF%E7%BD%91%E5%8D%A1/"><span class="chip bg-color">无线网卡</span></a></div></div><div class="col s5 right-align"><div class="post-cate"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/Kext/" class="post-category">Kext</a></div></div></div><div class="post-info"><div class="post-date info-break-policy"><i class="far fa-calendar-minus fa-fw"></i> 发布日期:&nbsp;&nbsp; 2020-05-01</div><div class="post-date info-break-policy"><i class="far fa-calendar-check fa-fw"></i> 更新日期:&nbsp;&nbsp; 2020-08-04</div><div class="info-break-policy"><i class="far fa-file-word fa-fw"></i> 文章字数:&nbsp;&nbsp; 2.9k</div><div class="info-break-policy"><i class="far fa-clock fa-fw"></i> 阅读时长:&nbsp;&nbsp; 12 分</div><div id="busuanzi_container_page_pv" class="info-break-policy"><i class="far fa-eye fa-fw"></i> 阅读次数:&nbsp;&nbsp;<span id="busuanzi_value_page_pv"></span></div></div></div><hr class="clearfix"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block;text-align:center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-7406269002228687" data-ad-slot="6237413824"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><div class="card-content article-card-content"><div id="articleContent"><p><a href="https://travis-ci.com/acidanthera/BrcmPatchRAM" target="_blank" rel="noopener external nofollow noreferrer"><img src="https://travis-ci.com/acidanthera/BrcmPatchRAM.svg?branch=master" alt="Build Status"></a></p><h2 id="介绍"><a href="#介绍" class="headerlink" title=" 介绍"></a><i class="fa fa-audio-description" aria-hidden="true"></i> 介绍</h2><p>大多数 Broadcom USB 蓝牙设备都使用称为 RAMUSB 的系统。RAMUSB 允许动态更新设备的固件，但是在关闭计算机时，先前应用的任何更新都会丢失。</p><p>Broadcom Windows 驱动程序将在每次启动时将固件上载到 Broadcom 蓝牙设备中，但是，对于 macOS，此功能不可用。 BrcmPatchRAM 是一个 macOS 驱动程序，适用于基于 Broadcom RAMUSB 的设备的 PatchRAM 更新。 每次启动/唤醒时，它将固件更新应用于 Broadcom 蓝牙设备，与 Windows 驱动程序相同。 应用的固件是从 Windows 驱动程序中提取的，并且功能应与 Windows 相同。</p><p>请注意，原始的 Apple Broadcom 蓝牙设备不是 RAMUSB 设备，因此没有相同的固件机制。</p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p><strong>请注意，如果您有Apple MacBook / iMac / Mac Pro等，请按照 <a href="https://github.com/acidanthera/BrcmPatchRAM/blob/master/README-Mac.md" target="_blank" rel="noopener external nofollow noreferrer">Mac instructions</a></strong></p><p>根据macOS版本安装<code>BrcmPatchRAM.kext</code>或<code>BrcmPatchRAM2.kext</code>或<code>BrcmPatchRAM3.kext</code>其中之一，决不要三者都安装。</p><pre><code>* `BrcmPatchRAM.kext`: 适用于 10.10 或更早版本.

* `BrcmPatchRAM2.kext`: 适用于 10.11 或更高版本.</code></pre><ul><li><code>BrcmPatchRAM3.kext</code>: 适用于 10.15.</li></ul><p>另外，根据安装位置安装一个固件kext BrcmFirmwareData.kext或BrcmFirmwareRepo.kext，决不要同时安装。</p><pre><code>* `BrcmFirmwareData.kext`: 最适合引导加载程序注入。 这是首选配置。

* `BrcmFirmwareRepo.kext`: 安装到`/System/Library/Extensions`（在10.11及更高版本上为`/Library/Extensions`）。 该kext的内存效率比`BrcmFirmwareData.kext`略高，但是不能由引导加载程序注入。

* 高级用户：对于自定义固件注入器，请安装注入器以及`BrcmFirmwareRepo.kext`。 这可以从`/System/Library/Extensions`或通过引导加载程序注入工作。 （可选）您可以从`BrcmFirmwareRepo.kext/Contents/Resources`中删除所有固件。 如果通过引导加载程序使用注入器，则必须将`BrcmFirmwareRepo.kext`的`Info.plist`中的`IOProviderClass`从`disabled_IOResources`更改为`IOResources`。</code></pre><p>另外，如果您有非PatchRAM设备（或者不确定），请安装macOS版本的<code>BrcmNonPatchRAM.kext</code>或<code>BrcmNonPatchRAM2.kext</code>之一，请不要同时安装两者。尽管这些kext不安装任何固件（这些设备内置固件），但它们仍依赖<code>BrcmPatchRAM.kext</code> / <code>BrcmPatchRAM2.kext</code>。</p><pre><code>* `BrcmNonPatchRAM.kext`: 适用于 10.10 或更早版本.

* `BrcmNonPatchRAM2.kext`: 适用于 10.11 或更高版本.</code></pre><h3 id="BrcmBluetoothInjector-kext"><a href="#BrcmBluetoothInjector-kext" class="headerlink" title="BrcmBluetoothInjector.kext"></a>BrcmBluetoothInjector.kext</h3><p>用于macOS 10.11或更高版本。</p><p>该kext是一个简单的注入器，它不包含固件上载器。 如果您希望查看您的设备在没有固件上传器的情况下是否可以运行，请尝试使用此kext。</p><p>请勿将其他任何扩展程序（<code>BrcmPatchRAM</code>，<code>BrcmPatchRAM2</code>，<code>BrcmPatchRAM3</code>，<code>BrcmFirmwareRepo</code>或<code>BrcmFirmwareData</code>）与此扩展程序一起使用。</p><blockquote><p>在<code>Catalina</code>以及<code>Mojave</code>中可能必须使用<code>BrcmBluetoothInjector.kext</code>才能正确驱动蓝牙设备，比如<code>DW1820A</code> / <code>DW1560</code></p></blockquote><p>发行版ZIP中未提供此kext。 您可以尝试构建它。 它已被删除，因为它可能会导致那些不太仔细阅读且未正确安装首选kext的人感到困惑。 当前未使用新设备进行更新。 如果您的不存在，请根据需要编辑<code>Info.plist</code>。</p><h3 id="支持的设备"><a href="#支持的设备" class="headerlink" title="支持的设备"></a>支持的设备</h3><p><code>BrcmPatchRAM</code>支持任何基于BCM20702芯片组的Broadcom USB蓝牙设备（可能也支持其他芯片组，但是尚未经过测试）。</p><p>目前支持以下设备：</p><ul><li>标有 ***** 的设备已成功测试</li></ul><p>非PatchRAM设备（BrcmPatchRAM用于加速睡眠后的恢复）：</p><pre><code>* ``[03f0:231d]`` HP 231d (ProBook BT built-in firmware)
* ``[13d3:3295]`` Azurewave BCM943225 (20702A bult-in firmware)</code></pre><p>经过测试的PatchRAM设备：<br>* <code>[0489:e032]</code> 20702 Combo USB<br>* <code>[0489:e042]</code> 20702A1 Lenovo China *<br>* <code>[0489:e079]</code> Lenovo China 43162 NGFF<br>* <code>[0489:e07a]</code> Lenovo NGFF (4352 / 20702)<br>* <code>[04ca:2003]</code> 20702A1 Lenovo China<br>* <code>[04ca:200a]</code> LiteOn (4352 Combo)<br>* <code>[04ca:200b]</code> LiteOn (4352 Combo) *<br>* <code>[04ca:200c]</code> LiteOn (4352 Combo)<br>* <code>[04ca:200f]</code> Acer / LiteOn (4352 Combo)<br>* <code>[050d:065a]</code> Belkin (20702)<br>* <code>[0930:0221]</code> Toshiba (4352 / 20702)<br>* <code>[0930:0223]</code> Toshiba NGFF (4352 / 20702) *<br>* <code>[0a5c:216b]</code> HP Rapture 4352Z NGFF Combo<br>* <code>[0a5c:216e]</code> HP Blackbird 43162 NGFF<br>* <code>[0a5c:216f]</code> Dell DW1560 (4352/20702)<br>* <code>[0a5c:21de]</code> 4352/20702A1 combo<br>* <code>[0a5c:21e1]</code> HP Softsailing (20702A1)<br>* <code>[0a5c:21e6]</code> non-UHE Lenovo Bluetooth (20702)<br>* <code>[0a5c:21e8]</code> Bluetooth USB Dongle (20702A1) *<br>* <code>[0a5c:21ec]</code> Inateck Bluetooth (20702A1)<br>* <code>[0a5c:21fb]</code> HP Supra 4352 (20702A1 Combo)<br>* <code>[0a5c:21fd]</code> Broadcom 4352Z<br>* <code>[0a5c:22be]</code> Broadcom BCM20702 Bluetooth 4.0 USB Device<br>* <code>[0a5c:6410]</code> Dell Wireless 1830 Bluetooth 4.1 LE<br>* <code>[0a5c:6412]</code> Dell Wireless 1820 Bluetooth 4.1 LE<br>* <code>[0a5c:6414]</code> BCM4350C5 (Lenovo) Bluetooth 4.1 LE<br>* <code>[0b05:17cb]</code> Asus BT-400 (20702 stand-alone) *<br>* <code>[0b05:17cf]</code> Asus (4352/20702A1 combo) *<br>* <code>[0b05:180a]</code> Azurewave (4360/20702 combo)<br>* <code>[13d3:3404]</code> Azurewave (4352HMB) *<br>* <code>[13d3:3411]</code> Dell Alienware (4352/20702A1 combo) *<br>* <code>[13d3:3413]</code> Azurewave (4360/20702 combo)<br>* <code>[13d3:3418]</code> Azurewave (4352/20702 combo)<br>* <code>[13d3:3435]</code> Azurewave (4352/20702 combo)<br>* <code>[13d3:3456]</code> Azurewave (4352/20702 combo)<br>* <code>[413c:8143]</code> Dell DW1550 (4352/20702 combo)</p><p>Windows软件包中的所有固件都存在于kext中，并自动与其供应商/设备ID关联。 它们有望工作，但尚未得到确认。 如果您可以确认上面未列出的工作设备，请通过github上的issues数据库进行通知。</p><h3 id="更多安装细节"><a href="#更多安装细节" class="headerlink" title="更多安装细节"></a>更多安装细节</h3><p><code>BrcmPatchRAM.kext</code>或<code>BrcmPatchRAM2.kext</code>或<code>BrcmPatchRAM3.kext</code>可以通过引导加载程序kext注入安装，也可以放置在<code>/System/Library/Extensions</code>（在10.11及更高版本中为<code>/Library/Extensions</code>）中。<br>根据系统版本，仅安装一个，而不是安装三个。</p><p><code>BrcmFirmwareRepo.kext</code>不适用于bootloader kext注入，除非使用特定于设备的固件注入器。<br><code>BrcmFirmwareData.kext</code>可以与bootloader kext注入一起使用。</p><p>您还可以使用特定于设备的固件注入器（与<code>BrcmFirmwareRepo.kext</code>结合使用）。 在这种情况下，<code>BrcmFirmwareRepo.kext</code>确实可以从引导加载程序kexts中工作。</p><p>您可以在git存储库的<code>firmwares</code>目录中找到设备专用注射器。 它们不包含在发行版ZIP中。</p><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>可以通过以下内核标志来更改许多延迟。 如果发现在固件加载期间<code>BrcmPatchRAM</code>挂起，则可以更改这些值。</p><ul><li><p><code>bpr_probedelay</code>：更改<code>mProbeDelay</code>。 预设值为<code>0</code></p></li><li><p><code>bpr_initialdelay</code>：更改<code>mInitialDelay</code>。 预设值为<code>100</code></p></li><li><p><code>bpr_preresetdelay</code>：更改<code>mPreResetDelay</code>。 预设值为<code>20</code></p></li><li><p><code>bpr_postresetdelay</code>：更改<code>mPostResetDelay</code>。 预设值为<code>100</code></p></li></ul><p>有关这些延迟的更多详细信息，请参阅来源。</p><p>例如，…要将<code>mPostResetDelay</code>更改为400ms，请使用内核标志：<code>bpr_postresetdelay=400</code>。</p><p>注意：一些典型的“从睡眠中唤醒”问题报告成功：<code>bpr_probedelay=100 bpr_initialdelay=300 bpr_postresetdelay=300</code>。 或稍长的延迟：<code>bpr_probedelay=200 bpr_initialdelay=400 bpr_postresetdelay=400</code>。</p><h3 id="细节"><a href="#细节" class="headerlink" title="细节"></a>细节</h3><p><code>BrcmPatchRAM</code>包含2个部分：</p><pre><code>* `BrcmPatchRAM`本身与受支持的Broadcom蓝牙USB设备（在`Info.plist`中配置）进行通信，并检测它们是否需要固件更新。

 如果需要固件更新，则匹配的固件数据将被上载到设备并重置设备。</code></pre><ul><li><p><code>BrcmFirmwareStore</code>（由<code>BrcmFirmwareData.kext</code>或<code>BrcmFirmwareRepo.kext</code>实现）是共享资源，其中包含用于不同Broadcom蓝牙USB设备的所有已配置固件。</p><p>某些设备需要特定于设备的固件，而其他设备可以使用Windows驱动程序中可用的最新版本。</p><p>会定期添加/配置新固件以支持设备，因此请确保遵循发行更新，或者如果发现不支持设备，请记录问题。</p><p>可以使用zlib压缩存储固件，以使配置大小易于管理。</p></li></ul><p>上传设备固件后，设备控件将移交给Apple的<code>BroadcomBluetoothHostControllerUSBTransport</code>。<br>这意味着，出于所有意图和目的，您的设备将是macOS上的本地设备，并且完全支持所有功能。</p><p>可以通过引导加载程序或通过BrcmPatchRAM与Continuity Activation Patch结合使用 <a href="https://github.com/acidanthera/BT4LEContinuityFixup" target="_blank" rel="noopener external nofollow noreferrer">BT4LEContinuityFixup</a>, 或通过dokterdok的脚本 <a href="https://github.com/dokterdok/Continuity-Activation-Tool" target="_blank" rel="noopener external nofollow noreferrer">Continuity-Activation-Tool</a></p><p><a href="https://github.com/acidanthera/OpenCorePkg" target="_blank" rel="noopener external nofollow noreferrer">OpenCore</a> 用户可以使用<code>config.plist</code>中的内核修补程序进行修补。</p><p>10.10的修补程序是：</p><pre class="line-numbers language-XML"><code class="language-XML"><dict>
        <key>Comment</key>
        <string>10.10.2+ BT4LE-Handoff-Hotspot, Dokterdok</string>
        <key>Find</key>
        <data>SIXAdFwPt0g=</data>
        <key>Identifier</key>
        <string>com.apple.iokit.IOBluetoothFamily</string>
        <key>Replace</key>
        <data>Qb4PAAAA61k=</data>
        
</dict><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>10.11的修补程序是：</p><pre class="line-numbers language-XML"><code class="language-XML"><dict>
        <key>Comment</key>
        <string>10.11.dp1+ BT4LE-Handoff-Hotspot, credit RehabMan based on Dokterdok original</string>
        <key>Find</key>
        <data>SIX/dEdIiwc=</data>
        <key>Identifier</key>
        <string>com.apple.iokit.IOBluetoothFamily</string>
        <key>Replace</key>
        <data>Qb4PAAAA60Q=</data>
        
</dict><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="故障排除"><a href="#故障排除" class="headerlink" title="故障排除"></a>故障排除</h3><p>安装<code>BrcmPatchRAM</code>之后，即使您的蓝牙图标可能出现，也可能是固件未正确更新。</p><p>通过转到系统信息并在蓝牙信息面板下检查蓝牙固件版本号来验证固件是否已更新。</p><p>如果版本号为<code>4096</code>，则意味着您的设备没有更新固件，并且将无法正常工作。</p><p>通过在终端中运行以下命令来验证系统日志中的任何错误：</p><pre class="line-numbers language-bash"><code class="language-bash">        <span class="token comment" spellcheck="true"># 10.12或者更新的系统:</span>
        log show --last boot <span class="token operator">|</span> <span class="token function">grep</span> -i brcm<span class="token punctuation">[</span>fp<span class="token punctuation">]</span>
        <span class="token comment" spellcheck="true"># 对于旧的macOS版本:</span>
        <span class="token function">cat</span> /var/log/system.log <span class="token operator">|</span> <span class="token function">grep</span> -i brcm<span class="token punctuation">[</span>fp<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>确保只检查最新的引导消息，因为<code>system.log</code>可能会追溯几天。</p><p>如果固件上传失败并显示错误，请尝试安装<code>BrcmPatchRAM</code>的``debug`版本，以便在日志中获取更多详细信息。</p><p>为了报告错误，请在github上用以下信息记录问题：</p><ul><li>Device product ID</li><li>Device vendor ID</li><li>使用的<code>BrcmPatchRAM</code>版本</li><li><code>/var/log/system.log</code>中的<code>BrcmPatchRAM</code>调试输出转储，显示固件上传失败</li></ul><h3 id="固件兼容性"><a href="#固件兼容性" class="headerlink" title="固件兼容性"></a>固件兼容性</h3><p>某些USB设备专用于固件，尝试将同一芯片组的任何其他固件上载到它们中都会失败。</p><p>通常在系统日志中显示为：</p><pre class="line-numbers language-bash"><code class="language-bash">    BrcmPatchRAM: Version 0.5 starting.
    BrcmPatchRAM: USB <span class="token punctuation">[</span>0a5c:21e8 5CF3706267E9 v274<span class="token punctuation">]</span> <span class="token string">"BCM20702A0"</span> by <span class="token string">"Broadcom Corp"</span>
    BrcmPatchRAM: Retrieved firmware <span class="token keyword">for</span> firmware key <span class="token string">"BCM20702A1_001.002.014.1443.1612_v5708"</span><span class="token keyword">.</span>
    BrcmPatchRAM: Decompressed firmware <span class="token punctuation">(</span>29714 bytes --<span class="token operator">></span> 70016 bytes<span class="token punctuation">)</span>.
    BrcmPatchRAM: device request failed <span class="token punctuation">(</span>0xe000404f<span class="token punctuation">)</span>.
    BrcmPatchRAM: Failed to reset the device <span class="token punctuation">(</span>0xe00002d5<span class="token punctuation">)</span>.
    BrcmPatchRAM: Unable to get device status <span class="token punctuation">(</span>0xe000404f<span class="token punctuation">)</span>.
    BrcmPatchRAM: Firmware upgrade completed successfully.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>两次之间的错误表示固件未成功上传，并且设备很可能需要配置特定的固件。</p><p>对于其他设备，可用的最新固件（即使未在Windows驱动程序中专门指定）也可以正常工作。</p><p>###新设备</p><p>为了支持新设备，需要从现有Windows驱动程序中提取该设备的固件。</p><p>可在以下位置找到最新（最新）的Broadcom USB蓝牙驱动程序的副本：<br><a href="http://drivers.softpedia.com/get/BLUETOOTH/Broadcom/ASUS-X99-DELUXE-Broadcom-Bluetooth-Driver-6515800-12009860.shtml#download" target="_blank" rel="noopener external nofollow noreferrer">http://drivers.softpedia.com/get/BLUETOOTH/Broadcom/ASUS-X99-DELUXE-Broadcom-Bluetooth-Driver-6515800-12009860.shtml#download</a></p><p><em>如果您遇到的驱动程序比12.0.0.9860更新，请告诉我。</em></p><p>为了获取设备专用的设备固件，请执行以下步骤：</p><ul><li><p>查找您的USB设备供应商和产品ID，在此示例中，我们将使用BCM94352Z PCI NGFF WiFi/BT组合卡，其供应商为0930，产品ID为0233。</p></li><li><p>解压缩Windows蓝牙驱动程序包并打开bcbtums-win8x64-brcm.inf文件</p></li><li><p>在.inf文件中找到您的供应商/设备ID组合</p><pre class="line-numbers language-dosini"><code class="language-dosini">%BRCM20702.DeviceDesc%=BlueRAMUSB0223, USB\VID_0930&PID_0223       ; 20702A1 Toshiba 4352<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>在.inf文件中找到提到的<code>RAMUSB0223</code>设备：</p><pre class="line-numbers language-dosini"><code class="language-dosini">;;;;;;;;;;;;;RAMUSB0223;;;;;;;;;;;;;;;;;
[RAMUSB0223.CopyList]
bcbtums.sys
btwampfl.sys
BCM20702A1_001.002.014.1443.1457.hex<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>在这种情况下，请从Windows软件包中复制与设备匹配的固件十六进制文件。<code>BCM20702A1_001.002.014.1443.1457.hex</code></p></li><li><p>现在可以选择使用随附的zlib.pl脚本压缩固件文件：</p><pre class="line-numbers language-bash"><code class="language-bash">zlib.pl deflate BCM20702A1_001.002.014.1443.1457.hex <span class="token operator">></span> BCM20702A1_001.002.014.1443.1457.zhx<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>之后，可以创建一个十六进制转储，以粘贴到plist编辑器中：</p><pre class="line-numbers language-bash"><code class="language-bash">xxd -ps BCM20702A1_001.002.014.1443.1457.zhx<span class="token operator">|</span><span class="token function">tr</span> <span class="token string">'\n'</span> <span class="token string">' '</span> <span class="token operator">></span> BCM20702A1_001.002.014.1443.1457.dmp<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p><em>使用plist编辑器在</em> <em><code>BcmFirmwareStore/Firmwares</code></em>词典下创建一个新的固件密钥。</p><pre><code>     请注意，macOS中显示的版本号是文件名中的最后一个数字（在我们的示例中为1457）+ 4096。

     因此，在这种情况下，macOS中的固件版本为：*`c14 v5553`*。    </code></pre></li><li><p>在<em><code>BcmFirmwareStore/Firmwares</code></em>下配置密钥后，将设备ID添加为<code>BrcmPatchRAM</code>的新设备。</p></li></ul><p>固件也可以直接通过<code>BrcmFirmwareRepo.kext/Contents/Resources</code>加载，可以通过固件密钥名称（请参见上文），也可以仅使用供应商和设备ID命名文件。 例如，<code>0930_0223.hex</code>（未压缩）或<code>0930_0223.zhx</code>（压缩）。</p><p>复制现有的IOKit个性化并修改其属性是最简单的方法。使用其唯一的固件密钥配置较早的固件。</p><h2 id="版本历史"><a href="#版本历史" class="headerlink" title=" 版本历史"></a><i class="fa fa-history" aria-hidden="true"></i> 版本历史</h2><ul><li><p>2.5.4</p><ul><li>Added inject BCM2070 - BCM943224HMB, BCM943225HMB Combo</li></ul></li><li><p>v2.5.3</p><ul><li>Fix parsing firmware versions (e.g. 8785 is 4689)</li><li>Use 4689 firmware for DW1820A [0a5c:6412]</li><li>Log uncompressed firmware SHA-1 in DEBUG builds</li><li>Reworked device reset to improve compatibility (thx @mishurov)</li></ul></li><li><p>v2.5.2</p><ul><li>Revert DW1820A from 8785 to 8784 [0a5c:6412]</li><li>Add older firmwares from 12.0.1.1012</li><li>Add bpr_handshake boot argument to override handshake support mode</li><li>Change bpr_preresetdelay=0 behaviour to no longer imply bpr_handshake=1</li></ul></li><li><p>v2.5.1</p><ul><li>Add Lenovo 00JT494 [0a5c:6414]</li></ul></li><li><p>v2.5.0</p><ul><li>Initial import based on @headkaze 2.2.12</li><li>Merged BrcmPatchRAM3 improvements authored by @Mieze</li></ul></li></ul><h2 id="下载链接"><a href="#下载链接" class="headerlink" title=" 下载链接"></a><i class="fa fa-cloud-download" aria-hidden="true"></i> 下载链接</h2><p>地址: <a href="https://taolu.lanzous.com/b01bd6lbe" target="_blank" rel="noopener external nofollow noreferrer">https://taolu.lanzous.com/b01bd6lbe</a><br>密码: e5oj</p><h2 id="资源来源"><a href="#资源来源" class="headerlink" title=" 资源来源"></a><i class="fa fa-database" aria-hidden="true"></i> 资源来源</h2><p><a href="https://github.com/acidanthera/BrcmPatchRAM" target="_blank" rel="noopener external nofollow noreferrer">BrcmPatchRAM</a></p></div><hr><div class="reprint" id="reprint-statement"><div class="reprint__author"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-user">文章作者:</i></span> <span class="reprint-info"><a href="https://blog.tlhub.cn" rel="external nofollow noreferrer">套陆</a></span></div><div class="reprint__type"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-link">文章链接:</i></span> <span class="reprint-info"><a href="https://blog.tlhub.cn/BrcmPatchRAM.html">https://blog.tlhub.cn/BrcmPatchRAM.html</a></span></div><div class="reprint__notice"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-copyright">版权声明:</i></span> <span class="reprint-info">本博客所有文章除特別声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://blog.tlhub.cn" target="_blank">套陆</a> !</span></div></div><script async defer>document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }</script><div class="tag_share" style="display:block"><div class="post-meta__tag-list" style="display:inline-block"><div class="article-tag"><a href="/tags/BrcmPatchRAM/"><span class="chip bg-color">BrcmPatchRAM</span></a> <a href="/tags/%E5%8D%9A%E9%80%9A/"><span class="chip bg-color">博通</span></a> <a href="/tags/%E6%97%A0%E7%BA%BF%E7%BD%91%E5%8D%A1/"><span class="chip bg-color">无线网卡</span></a></div></div><div class="post_share" style="zoom:80%;width:fit-content;display:inline-block;float:right;margin:-.15rem 0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/libs/share/css/share.min.css"><div id="article-share"><div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div><script src="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/libs/share/js/social-share.min.js"></script></div></div></div><style>#reward{margin:40px 0;text-align:center}#reward .reward-link{font-size:1.4rem;line-height:38px}#reward .btn-floating:hover{box-shadow:0 6px 12px rgba(0,0,0,.2),0 5px 15px rgba(0,0,0,.2)}#rewardModal{width:320px;height:350px}#rewardModal .reward-title{margin:15px auto;padding-bottom:5px}#rewardModal .modal-content{padding:10px}#rewardModal .close{position:absolute;right:15px;top:15px;color:rgba(0,0,0,.5);font-size:1.3rem;line-height:20px;cursor:pointer}#rewardModal .close:hover{color:#ef5350;transform:scale(1.3);-moz-transform:scale(1.3);-webkit-transform:scale(1.3);-o-transform:scale(1.3)}#rewardModal .reward-tabs{margin:0 auto;width:210px}.reward-tabs .tabs{height:38px;margin:10px auto;padding-left:0}.reward-content ul{padding-left:0!important}.reward-tabs .tabs .tab{height:38px;line-height:38px}.reward-tabs .tab a{color:#fff;background-color:#ccc}.reward-tabs .tab a:hover{background-color:#ccc;color:#fff}.reward-tabs .wechat-tab .active{color:#fff!important;background-color:#22ab38!important}.reward-tabs .alipay-tab .active{color:#fff!important;background-color:#019fe8!important}.reward-tabs .reward-img{width:210px;height:210px}</style><div id="reward"><a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a><div id="rewardModal" class="modal"><div class="modal-content"><a class="close modal-close"><i class="fas fa-times"></i></a><h4 class="reward-title">你的赏识是我前进的动力</h4><div class="reward-content"><div class="reward-tabs"><ul class="tabs row"><li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li><li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li></ul><div id="alipay"><img src="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码"></div><div id="wechat"><img src="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/medias/reward/wechatpay.jpg" class="reward-img" alt="微信打赏二维码"></div></div></div></div></div></div><script>$(function(){$(".tabs").tabs()})</script></div></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/libs/gitalk/gitalk.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/css/my-gitalk.css"><div class="card gitalk-card" data-aos="fade-up"><div class="comment_headling" style="font-size:20px;font-weight:700;position:relative;padding-left:20px;top:15px;padding-bottom:5px"><i class="fas fa-comments fa-fw" aria-hidden="true"></i> <span>评论</span></div><div id="gitalk-container" class="card-content"></div></div><script src="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/libs/gitalk/gitalk.min.js"></script><script>let gitalk = new Gitalk({
        clientID: 'ae84231acb9f9d755d64',
        clientSecret: '999406dd97c504a700abe350a711868e1000fcec',
        repo: 'athlonreg.github.io',
        owner: 'athlonreg',
        admin: "athlonreg",
        id: '2020-05-01T13-54-23',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');</script><article id="prenext-posts" class="prev-next articles"><div class="row article-row"><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge left-badge text-color"><i class="fas fa-chevron-left"></i> &nbsp;上一篇</div><div class="card"><a href="/BT4LEContinuityFixup.html"><div class="card-image"><img src="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/medias/featureimages/21.jpg" class="responsive-img" alt="BT4LEContinuityFixup 蓝牙修补驱动"> <span class="card-title">BT4LEContinuityFixup 蓝牙修补驱动</span></div></a><div class="card-content article-content"><div class="summary block-with-text">一个开源内核扩展程序，为 IOBluetoothFamily 提供一系列的修补。</div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i> 2020-05-01</span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/Kext/" class="post-category">Kext</a></span></div></div><div class="card-action article-tags"><a href="/tags/BT4LEContinuityFixup/"><span class="chip bg-color">BT4LEContinuityFixup</span></a> <a href="/tags/%E8%93%9D%E7%89%99/"><span class="chip bg-color">蓝牙</span></a></div></div></div><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge right-badge text-color">下一篇&nbsp;<i class="fas fa-chevron-right"></i></div><div class="card"><a href="/CPUTune.html"><div class="card-image"><img src="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/medias/featureimages/19.jpg" class="responsive-img" alt="CPUTune 驱动汇总"> <span class="card-title">CPUTune 驱动汇总</span></div></a><div class="card-content article-content"><div class="summary block-with-text">对 macOS 进行动态 CPU 性能调整的开源内核扩展。</div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i> 2020-05-01</span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/Kext/" class="post-category">Kext</a></span></div></div><div class="card-action article-tags"><a href="/tags/CPUTune/"><span class="chip bg-color">CPUTune</span></a> <a href="/tags/Turbo-Boost/"><span class="chip bg-color">Turbo Boost</span></a></div></div></div></div></article></div><script>$("#articleContent").on("copy",function(e){if(void 0!==window.getSelection){var n=window.getSelection();if(!((""+n).length<Number.parseInt("60"))){var t=document.getElementsByTagName("body")[0],o=document.createElement("div");o.style.position="absolute",o.style.left="-99999px",t.appendChild(o),o.appendChild(n.getRangeAt(0).cloneContents()),"PRE"===n.getRangeAt(0).commonAncestorContainer.nodeName&&(o.innerHTML="<pre>"+o.innerHTML+"</pre>");var i=document.location.href;o.innerHTML+='<br />来源: 套陆的部落阁<br />文章作者: 套陆<br />文章链接: <a href="'+i+'">'+i+"</a><br />本文章著作权归作者所有，任何形式的转载都请注明出处。",n.selectAllChildren(o),window.setTimeout(function(){t.removeChild(o)},200)}}})</script><script src="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/libs/codeBlock/codeBlockFuction.js"></script><script src="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/libs/codeBlock/codeLang.js"></script><script src="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/libs/codeBlock/codeCopy.js"></script></div><div id="toc-aside" class="expanded col l3 hide-on-med-and-down"><div class="toc-widget"><div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div><div id="toc-content"></div></div></div></div><div id="floating-toc-btn" class="hide-on-med-and-down"><a class="btn-floating btn-large bg-color"><i class="fas fa-list-ul"></i></a></div><script src="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/libs/tocbot/tocbot.min.js"></script><script>$(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('2'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });</script></main><footer class="page-footer bg-color"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/libs/aplayer/APlayer.min.css"><style>.aplayer .aplayer-lrc p{display:none;font-size:12px;font-weight:700;line-height:16px!important}.aplayer .aplayer-lrc p.aplayer-lrc-current{display:none;font-size:15px;color:#b7daff}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body{left:-66px!important}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover{left:0!important}</style><div><div class="row"><meting-js class="col l8 offset-l2 m10 offset-m1 s12" server="netease" type="playlist" id="327690691" fixed="true" autoplay theme="#b7daff" loop order="random" preload="auto" volume="0.7" list-folded="true"></meting-js></div></div><script src="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/libs/aplayer/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><div class="container row center-align" style="margin-bottom:0!important"><div class="col s12 m8 l8 copy-right"><span id="icp"><img src="https://cdn.jsdelivr.net/gh/tlhub/1/gabico.png" style="vertical-align:text-bottom"> <a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11011302002019" rel="external nofollow noreferrer" target="_blank">京公网安备 11011302002019号</a> &nbsp;|&nbsp; <a href="http://www.beian.miit.gov.cn/" rel="external nofollow noreferrer" target="_blank">京ICP备20017043号-1</a></span><br>Copyright&nbsp;&copy; <span id="year">2017</span> <a href="/about" target="_blank">套陆</a> | CDN BY &nbsp;<a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" rel="external nofollow noreferrer"><img src="https://cdn.jsdelivr.net/gh/tlhub/picbed-1/又拍云_logo6.png" style="height:25px;margin-bottom:-6px"></a><br>&nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span class="white-color">113.4k</span>&nbsp;字 <span id="busuanzi_container_site_pv">|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv" class="white-color"></span>&nbsp;次</span> <span id="busuanzi_container_site_uv">|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv" class="white-color"></span>&nbsp;人</span><script>$(document).ready(function(){var e=setInterval(function(){"none"!=document.getElementById("busuanzi_container_site_pv").style.display&&($("#busuanzi_value_site_pv").html(parseInt($("#busuanzi_value_site_pv").html())+n),clearInterval(e));"none"!=$("#busuanzi_container_site_pv").css("display")&&($("#busuanzi_value_site_uv").html(parseInt($("#busuanzi_value_site_uv").html())+n),clearInterval(e))},50),n=2e5})</script></div><div class="col s12 m4 l4 social-link social-statis"><a href="https://github.com/athlonreg" rel="external nofollow noreferrer" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50"><i class="fab fa-github"></i></a><a href="mailto:1143991340@qq.com" rel="external nofollow noreferrer" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fas fa-envelope-open"></i></a><a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1143991340" rel="external nofollow noreferrer" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1143991340" data-position="top" data-delay="50"><i class="fab fa-qq"></i></a><a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50"><i class="fas fa-rss"></i></a></div></div><br></footer><div class="progress-bar"></div><div id="searchModal" class="modal"><div class="modal-content"><div class="search-header"><span class="title"><i class="fas fa-search"></i> &nbsp;&nbsp;搜索</span> <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字" class="search-input"></div><div id="searchResult"></div></div></div><script src="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/js/search.js"></script><script>$(function(){searchFunc("https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/search.xml","searchInput","searchResult")})</script><div id="backTop" class="top-scroll"><a class="btn-floating btn-large waves-effect waves-light" href="#!"><i class="fas fa-arrow-up"></i></a></div><script src="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/libs/materialize/materialize.min.js"></script><script src="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/libs/masonry/masonry.pkgd.min.js"></script><script src="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/libs/aos/aos.js"></script><script src="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/libs/scrollprogress/scrollProgress.min.js"></script><script src="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/libs/lightGallery/js/lightgallery-all.min.js"></script><script src="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/js/matery.js"></script><script src="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/libs/others/clicklove.js" async></script><script async src="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/libs/others/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/gh/athlonreg/athlonreg.github.io/libs/instantpage/instantpage.js" type="module"></script></body></html>